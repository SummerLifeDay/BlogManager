<!DOCTYPE html>
<html lang="zh">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="author" content="yinq">
    <title>菜品管理 - 餐厅管理系统</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" type="text/css" th:href="@{/css/materialdesignicons.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/animate.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.min.css}">
</head>

<body>
<!--页面loading-->
<div id="lyear-preloader" class="loading">
    <div class="ctn-preloader">
        <div class="round_spinner">
            <div class="spinner"></div>
            <b>加载中...</b>
        </div>
    </div>
</div>
<!--页面loading end-->
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!--左侧导航-->
        <aside class="lyear-layout-sidebar">

            <!-- logo -->
            <div id="logo" class="sidebar-header">
                <a href="/index"><img th:src="@{/images/logo-sidebar.jpg}" title="Canting" alt="Canting" /></a>
            </div>
            <div class="lyear-layout-sidebar-info lyear-scroll">

                <nav class="sidebar-main">
                    <ul class="nav-drawer">
                        <li class="nav-item active"> <a href="/index"><i class="mdi mdi-home"></i> <span>后台首页</span></a> </li>
                        <li class="nav-item"><a href="/admin/order"><i class="mdi mdi-room-service"></i> 点菜中心</a></li>
                        <li class="nav-item"><a href="/admin/product"><i class="mdi mdi-food"></i>菜品管理</a></li>
                        <li class="nav-item"><a href="/admin/manage"><i class="mdi mdi-clipboard"></i> 订单管理</a></li>
                        <li class="nav-item"><a href="/admin/customer"><i class="mdi mdi-account"></i> 会员管理</a></li>
                        <li class="nav-item"><a href="/admin/coupon"><i class="mdi mdi-store"></i> 优惠券管理</a></li>
                    </ul>
                </nav>

                <div class="sidebar-footer">
                    <p class="copyright">Copyright &copy; 2022. <a target="_blank" href="index.html">神奇小餐厅</a> All rights reserved.</p>
                </div>
            </div>

        </aside>
        <!--End 左侧导航-->

        <!--头部信息-->
        <header class="lyear-layout-header">

            <nav class="navbar">

                <div class="navbar-left">
                    <div class="lyear-aside-toggler">
                        <span class="lyear-toggler-bar"></span>
                        <span class="lyear-toggler-bar"></span>
                        <span class="lyear-toggler-bar"></span>
                    </div>
                </div>

                <ul class="navbar-right d-flex align-items-center">

                    <!--切换主题配色-->
                    <li class="dropdown dropdown-skin">
                        <span data-toggle="dropdown" class="icon-item"><i class="mdi mdi-palette"></i></span>
                        <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                            <li class="drop-title"><p>主题</p></li>
                            <li class="drop-skin-li clearfix">
                <span class="inverse">
                  <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                  <label for="site_theme_1"></label>
                </span>
                                <span>
                  <input type="radio" name="site_theme" value="dark" id="site_theme_2">
                  <label for="site_theme_2"></label>
                </span>
                                <span>
                  <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                  <label for="site_theme_3"></label>
                </span>
                            </li>
                            <li class="drop-title"><p>LOGO</p></li>
                            <li class="drop-skin-li clearfix">
                <span class="inverse">
                  <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                  <label for="logo_bg_1"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                  <label for="logo_bg_2"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                  <label for="logo_bg_3"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                  <label for="logo_bg_4"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                  <label for="logo_bg_5"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                  <label for="logo_bg_6"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                  <label for="logo_bg_7"></label>
                </span>
                                <span>
                  <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                  <label for="logo_bg_8"></label>
                </span>
                            </li>
                            <li class="drop-title"><p>头部</p></li>
                            <li class="drop-skin-li clearfix">
                <span class="inverse">
                  <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                  <label for="header_bg_1"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                  <label for="header_bg_2"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                  <label for="header_bg_3"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                  <label for="header_bg_4"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                  <label for="header_bg_5"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                  <label for="header_bg_6"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                  <label for="header_bg_7"></label>
                </span>
                                <span>
                  <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                  <label for="header_bg_8"></label>
                </span>
                            </li>
                            <li class="drop-title"><p>侧边栏</p></li>
                            <li class="drop-skin-li clearfix">
                <span class="inverse">
                  <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                  <label for="sidebar_bg_1"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                  <label for="sidebar_bg_2"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                  <label for="sidebar_bg_3"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                  <label for="sidebar_bg_4"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                  <label for="sidebar_bg_5"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                  <label for="sidebar_bg_6"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                  <label for="sidebar_bg_7"></label>
                </span>
                                <span>
                  <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                  <label for="sidebar_bg_8"></label>
                </span>
                            </li>
                        </ul>
                    </li>
                    <!--切换主题配色end-->
                    <li class="dropdown dropdown-profile">
                        <a href="javascript:void(0)" data-toggle="dropdown" class="dropdown-toggle">
                            <img class="img-avatar img-avatar-48 m-r-10" th:src="@{/images/users/avatar.jpg}" alt="柴林" />
                            <span>管理员</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right">

                            <li>
                                <a class="dropdown-item" href="javascript:void(0)"><i class="mdi mdi-delete"></i> 清空缓存</a>
                            </li>
                            <li class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item" href=/login><i class="mdi mdi-logout-variant"></i> 退出登录</a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </nav>

        </header>
        <!--End 头部信息-->

        <!--页面主要内容-->
        <!-- 页面主要内容开始 -->
        <main class="lyear-layout-content">
            <div class="container-fluid p-t-15">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">

                            <!-- 顶部开始 -->
                            <div class="card-toolbar clearfix">
                                <!-- 新增菜品按钮 -->
                                <div class="pull-right toolbar-btn-action">
                                    <button type="button" class="btn btn-primary" data-toggle="modal"
                                            data-target="#add_product" data-whatever="@mdo"><i
                                            class="mdi mdi-plus"></i>新增菜品
                                    </button>
                                </div>

                                <!-- 新增菜品弹窗 -->
                                <div class="modal fade" id="add_product" tabindex="-1" role="dialog"
                                     aria-labelledby="add_product" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h6 class="modal-title" id="">添加菜品</h6>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <!-- 新增菜品表单 -->
                                                <form action="/admin/product/add" method="post">
                                                    <div class="form-group row">
                                                        <label for="inputPName"
                                                               class="col-sm-2 col-form-label">菜名</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" class="form-control" id="inputPName"
                                                                   name="pName">
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="inputPirce"
                                                               class="col-sm-2 col-form-label">价格</label>
                                                        <div class="col-sm-10">
                                                            <input type="number" class="form-control" id="inputPirce"
                                                                   name="price">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label for="inputPrserve"
                                                               class="col-sm-2 col-form-label">库存</label>
                                                        <div class="col-sm-10">
                                                            <input type="number" class="form-control" id="inputPrserve"
                                                                   name="reserve">
                                                        </div>
                                                    </div>

                                                    <!-- 图片 -->
                                                    <div class="form-group row">
                                                        <label for="inputPrserve"
                                                               class="col-sm-2 col-form-label">图片</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" class="form-control" id="inputImgUrl"
                                                                   name="imgUrl">
                                                        </div>
                                                    </div>

                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                                data-dismiss="modal">取消
                                                        </button>
                                                        <button type="submit" class="btn btn-primary"
                                                                onclick="addTip()">添加
                                                        </button>
                                                    </div>
                                                </form>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- 新增菜品弹窗结束 -->


                            </div>
                            <!-- 顶部结束 -->
                            <!-- 表格开始 -->
                            <div class="card-body">
                                <!-- 内层div -->
                                <div class="table-responsive">
                                    <!-- 表格 -->
                                    <table class="table table-bordered table-hover" id="ProductList" style="text-align: center">
                                        <!-- 表头 -->
                                        <thead>
                                        <tr class="table-hover">
                                            <th style="text-align: center">序号</th>
                                            <th style="text-align: center; width: 250px">图片</th>
                                            <th style="text-align: center">菜品名</th>
                                            <th style="text-align: center">价格</th>
                                            <th style="text-align: center">库存</th>
                                            <th style="text-align: center">操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <!--  表格开始-->
                                        <tr th:each="item:${products}">
                                            <!-- ID -->
                                            <td th:text="${item.pId}"></td>
                                            <!-- 图片 -->
                                            <td><img th:src="${item.imgUrl}" width="230px" height="180px"></td>
                                            <!-- 菜品名 -->
                                            <td th:text="${item.pName}"></td>
                                            <!-- 价格 -->
                                            <td th:text="${item.price}"></td>
                                            <!-- 库存 -->
                                            <td th:text="${item.reserve}"></td>
                                            <!-- 操作 -->
                                            <td>
                                                <div class="btn-group">
                                                    <a class="btn btn-md btn-info" title="编辑" onclick=""
                                                       data-toggle="modal" data-target="#editProduct"
                                                       data-whatever="@mdo">
                                                        <i class="mdi mdi-pencil"></i>
                                                    </a>
                                                    <a class="btn btn-md btn-danger del" title="删除" th:id="${item.pId}"
                                                       data-toggle="tooltip">
                                                        <i class="mdi mdi-window-close"></i>
                                                    </a>
                                                </div>
                                                <!-- 修改菜品弹窗 -->
                                                <div class="modal fade" id="editProduct" tabindex="-1" role="dialog"
                                                     aria-labelledby="editProduct" aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h6 class="modal-title">修改菜品</h6>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                        aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <!-- 新增菜品表单 -->
                                                                <form action="/admin/product/update" method="post">
                                                                    <div class="form-group row">
                                                                        <label for="inputPName"
                                                                               class="col-sm-2 col-form-label">ID</label>
                                                                        <div class="col-sm-10">
                                                                            <input type="number" class="form-control" id="inputPName"
                                                                                   name="pId">
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group row">
                                                                        <label for="inputPName"
                                                                               class="col-sm-2 col-form-label">菜名</label>
                                                                        <div class="col-sm-10">
                                                                            <input type="text" class="form-control" id="inputPName"
                                                                                   name="pName">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label for="inputPirce"
                                                                               class="col-sm-2 col-form-label">价格</label>
                                                                        <div class="col-sm-10">
                                                                            <input type="number" class="form-control" id="inputPirce"
                                                                                   name="price">
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group row">
                                                                        <label for="inputPrserve"
                                                                               class="col-sm-2 col-form-label">库存</label>
                                                                        <div class="col-sm-10">
                                                                            <input type="number" class="form-control" id="inputPrserve"
                                                                                   name="reserve">
                                                                        </div>
                                                                    </div>

                                                                    <!-- 图片 -->
                                                                    <div class="form-group row">
                                                                        <label for="inputPrserve"
                                                                               class="col-sm-2 col-form-label">图片</label>
                                                                        <div class="col-sm-10">
                                                                            <input type="text" class="form-control" id="inputImgUrl"
                                                                                   name="imgUrl">
                                                                        </div>
                                                                    </div>

                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                                data-dismiss="modal">取消
                                                                        </button>
                                                                        <button type="submit" class="btn btn-primary"
                                                                                onclick="addTip()">修改
                                                                        </button>
                                                                    </div>
                                                                </form>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- 修改菜品弹窗结束 -->
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>



                                <!-- 表格结束 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!--End 页面主要内容-->
    </div>
</div>

<script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/js/popper.min.js}"></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/perfect-scrollbar.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.cookie.min.js}"></script>
<script type="text/javascript" th:src="@{/js/main.min.js}"></script>
<script type="text/javascript" th:src="@{/js/Chart.min.js}"></script>

<script>
    // 新增成功提示
    function addTip() {
        alert("添加成功！")
    };

    // 修改成功提示
    function eidtTip() {
        alert("修改成功！")
    }
    // 删除
    $(".del").click(
        function () {
            console.log($(this).attr("id"))
            var flag = confirm("确定要删除吗？");
            if (flag) {
                $.ajax({
                    url: "/admin/product/del",
                    type: "POST",
                    data: {pId: $(this).attr("id")},
                    success: function (data) {
                        alert("删除成功");
                        location.reload();
                    },
                    error: function (data) {
                        alert("删除失败");
                    },
                })

            }
        }
    )


</script>
</body>
</html>